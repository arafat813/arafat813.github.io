<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>CSS属性的计算过程</title>
      <link href="/posts/83b2c1d6.html"/>
      <url>/posts/83b2c1d6.html</url>
      
        <content type="html"><![CDATA[<h1 id="CSS属性的计算过程"><a href="#CSS属性的计算过程" class="headerlink" title="CSS属性的计算过程"></a>CSS属性的计算过程</h1><h2 id="css属性值的计算过程"><a href="#css属性值的计算过程" class="headerlink" title="css属性值的计算过程"></a>css属性值的计算过程</h2><h3 id="什么是css属性值的计算过程"><a href="#什么是css属性值的计算过程" class="headerlink" title="什么是css属性值的计算过程"></a>什么是css属性值的计算过程</h3><pre><code>某个元素从所有的CSS元素没有值，到所有的CSS属性都有值的过程叫做计算过程也就是说就算只给div设置了一个背景颜色，不表示它没有其他属性值，它的所有css属性都有值</code></pre><h3 id="如何计算"><a href="#如何计算" class="headerlink" title="如何计算"></a>如何计算</h3><pre><code>分为四个步骤：（按顺序来，不能乱序）    1.确定声明值：        从作者样式表(我们所写的样式)和默认样式表(浏览器默认的样式)中找到没有冲突的样式，直接作为计算后的样式。        （类似于red类型的会转化成rbg）    2.层叠(css全称： 层叠样式表)        对有冲突的样式进行层叠，通过以下三个步骤：            1.比较重要性                重要性从高到底：                    1.带有important的作者样式                    2.带有important的默认样式                    3.作者样式                    4.默认样式            2.比较权重                对每个样式进行计算：                    sytye: 内敛为1 否则为0                    id：id选择器的数量                    属性：属性、类、伪类的数量                    元素：元素 伪元素的数量                比如：                    .red &#123;color : red&#125;    0 0 1 0                    h1 &#123;color: red&#125;       0 0 0 1                    .div h1 .red           0 0 2 1   权重最大 优先级越高            3.比较源次序                如果权值相同，谁在下面谁优先级高    3.继承        对于仍然没有值的属性，若可以继承，则使用继承(可以去官网查看会不会继承，文字类大概率继承)    4.使用默认值        到目前还会没有值的(比如：background-color)会使用属性的默认值，每个属性都有默认值        比如background-color的默认值是transparent(透明)通过以上四个步骤 所有的css属性都会有值因为继承发生在第三步  而有些元素因为有默认值 且跟作者元素没有冲突 导致内部元素没有继承就是因为在某一部确定了值就不会进行下一步  比如：</code></pre><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.box</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: red</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;box&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span>&gt;</span>123<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>a标签并不会继承红色，因为a标签有默认样式颜色 所以第一步就确定了值如果第一步就确定了值 而没有继承值如a标签的颜色   可以使用color：inherit  将父元素属性值粘贴过来</code></pre><h2 id="实用技巧"><a href="#实用技巧" class="headerlink" title="实用技巧"></a>实用技巧</h2><h3 id="主动将某一样式设置为默认样式"><a href="#主动将某一样式设置为默认样式" class="headerlink" title="主动将某一样式设置为默认样式"></a>主动将某一样式设置为默认样式</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.box</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">line-height</span>: initial;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="想要清楚所有的浏览器默认样式-unset"><a href="#想要清楚所有的浏览器默认样式-unset" class="headerlink" title="想要清楚所有的浏览器默认样式  unset"></a>想要清楚所有的浏览器默认样式  unset</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">body</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">body</span> *<span class="selector-pseudo">:not</span>(script)&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">all</span>: unset;  </span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="恢复默认属性-revert"><a href="#恢复默认属性-revert" class="headerlink" title="恢复默认属性 revert"></a>恢复默认属性 revert</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.default</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">all</span>: revert;  </span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2数据劫持</title>
      <link href="/posts/bd38f349.html"/>
      <url>/posts/bd38f349.html</url>
      
        <content type="html"><![CDATA[<h1 id="Vue2的数据劫持"><a href="#Vue2的数据劫持" class="headerlink" title="Vue2的数据劫持"></a>Vue2的数据劫持</h1><p>vue2的数据劫持使用Object.defineProperty对数据进行劫持，在数据变动时发布消息给订阅者，触发相应的监听回调。<br>以下是实现的代码 可以参考</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 先定义一个数据</span></span><br><span class="line"><span class="keyword">const</span> data = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;arafat&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 对数据进行遍历</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">in</span> data)&#123;</span><br><span class="line">    <span class="keyword">let</span> value = data[i]</span><br><span class="line">    <span class="comment">// 依赖收集: 用于存储用到此数据的方法</span></span><br><span class="line">    <span class="keyword">let</span> arr = []</span><br><span class="line">    <span class="comment">// 通过Object.defineProperty对数据进行劫持</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(data , i, &#123;</span><br><span class="line">        <span class="attr">get</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">// 是否有此函数 没有就添加</span></span><br><span class="line">            <span class="keyword">if</span>(!arr.<span class="title function_">includes</span>(<span class="variable language_">window</span>.<span class="property">__func</span>))&#123;</span><br><span class="line">                arr.<span class="title function_">push</span>(<span class="variable language_">window</span>.<span class="property">__func</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> value</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">set</span>: <span class="keyword">function</span> (<span class="params">newV</span>)&#123;</span><br><span class="line">            value = newV</span><br><span class="line">            <span class="comment">// 遍历订阅过的函数  并更新</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> j <span class="keyword">of</span> arr)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    <span class="title function_">j</span>()</span><br><span class="line">                &#125;<span class="keyword">catch</span>(err)&#123;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.name&#x27;</span>).<span class="property">textContent</span> = data.<span class="property">name</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setAge</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.age&#x27;</span>).<span class="property">textContent</span> = data.<span class="property">age</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setAll</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.all&#x27;</span>).<span class="property">textContent</span> = data.<span class="property">name</span> + <span class="string">&quot; - &quot;</span> + data.<span class="property">age</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 因为需要依赖收集  所以执行时全局暴露函数 使用完清空</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">autoRun</span>(<span class="params">fn</span>)&#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">__func</span> = fn</span><br><span class="line">    <span class="title function_">fn</span>()</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">__func</span> = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">autoRun</span>(setName)</span><br><span class="line"><span class="title function_">autoRun</span>(setAge)</span><br><span class="line"><span class="title function_">autoRun</span>(setAll)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue2 </tag>
            
            <tag> 面试常问 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浏览器的渲染原理</title>
      <link href="/posts/b5fc6f17.html"/>
      <url>/posts/b5fc6f17.html</url>
      
        <content type="html"><![CDATA[<h1 id="浏览器是如何渲染页面的？"><a href="#浏览器是如何渲染页面的？" class="headerlink" title="浏览器是如何渲染页面的？"></a>浏览器是如何渲染页面的？</h1><p>&emsp;&emsp; 当浏览器收到了html文档后，会产生一个渲染任务，并将其递给渲染主线程的消息队列。再事件循环机制的作用下，渲染主线程取出消息队列中的渲染任务，开启渲染流程。</p><p>&emsp;&emsp;整个渲染流程分为多个阶段：HTML解析，样式计算，布局，分层，绘制，分块，画。每个阶段都有明确的输入输出，上一个阶段的输出会成为下一个阶段的输入。<br>&emsp;&emsp;这样渲染流程就形成了一套组织严密的生产流水线。</p><h2 id="渲染的第一步是解析HTML"><a href="#渲染的第一步是解析HTML" class="headerlink" title="渲染的第一步是解析HTML"></a>渲染的第一步是解析HTML</h2><p>&emsp;&emsp;解析过程中遇到CSS解析CSS，遇到JS执行JS。为了提高解析效率，浏览器就在开始解析前，会启动一个解析的线程，率先下载HTML中的外部CSS文件和外部的JS文件。</p><p>&emsp;&emsp;如果主线程解析到了link位置，此时外部的CSS文件还没下载解析好，主线程不会等待，继续解析后续HTML。这是因为下载和CSS的工作是在预解析线程中进行的。这就是CSS不会阻塞HTML的根本原因。</p><p>&emsp;&emsp;如果主线程解析到了script位置，会停止解析HTML，转而等待JS文件下载好，并将全局代码解析执行完成后才能解析HTML。这是因为JS代码的执行过程可能会修改当前的DOM树，所有DOM树的生成必须暂停。这就是JS会阻塞HTML解析的根本原因。<br>（注意：</p><ul><li><ol><li> DOM解析和CSS解析是两个并行的进程，所以这也解释了为什么CSS加载不会阻塞DOM的解析。</li></ol></li><li><ol start="2"><li> 然而，由于Render Tree是依赖于DOM Tree和CSSOM Tree的，所以他必须等待到CSSOM Tree构建完成，也就是CSS资源加载完成(或者CSS资源加载失败)后，才能开始渲染。因此，CSS加载是会阻塞Dom的渲染的。</li></ol></li><li><ol start="3"><li>由于js可能会操作之前的Dom节点和css样式，因此浏览器会维持html中css和js的顺序。因此，样式表会在后面的js执行前先加载执行完毕。所以css会阻塞后面js的执行。<br>补充）</li></ol></li></ul><p>&emsp;&emsp;第一步完成后会得到DOM树和CSSOM树，浏览器的默认样式，内部样式，外部样式，行内样式均会包含在CSSOM树中。</p><h2 id="第二步-样式计算"><a href="#第二步-样式计算" class="headerlink" title="第二步 样式计算"></a>第二步 样式计算</h2><p>&emsp;&emsp;主线程会遍历得到DOM树，依次为树中的每个节点计算出它最终的样式，称之为computed style， 在这一过程中很多预设值都会变成绝对值，比如red会变成rgb(255,0,0),相对单位会变成绝对单位，比如em会变成px</p><p>&emsp;&emsp;这一步完成后会得到一颗带有样式的DOM树。</p><h2 id="第三步是布局"><a href="#第三步是布局" class="headerlink" title="第三步是布局"></a>第三步是布局</h2><p>&emsp;&emsp;布局阶段会遍历DOM树每个节点，计算每个节点的几何信息。列如节点的宽高，相对包含块的位置。<br>&emsp;&emsp;大部分的时候DOM树和布局树并非一一对应。比如display:none的节点没有任何几何信息，因此不会生成布局树，还有伪元素选择器，虽然DOM树中不存在这些伪元素节点，但它们拥有几何信息，所以会生成刀布局树中。</p><p>（注意：</p><ul><li><ol><li>内容必须在行盒中</li></ol></li><li><ol start="2"><li>行盒和块盒不能相邻<div>   <p>a</p>   b   <p>c</p></div>这种情况下dom树结构     div         布局树元素   div       p元素  b  p元素         p元素  匿名块盒  p元素         a         c            匿名行盒   b     匿名行盒                                 a              c </li></ol></li></ul><h2 id="第四步是分层"><a href="#第四步是分层" class="headerlink" title="第四步是分层"></a>第四步是分层</h2><p>&emsp;&emsp;主线程会使用一套复杂的策略对整个布局树进行分层。分层的好处在于将来某一个层改变后，仅会对该层进行后续处理，从而提升效率。</p><p>比如：滚动条，transform，opacity等样式或多或少的影响分层结构，可以通过will-change属性更大程度的影响分层结果。</p><p>（注意：分层不能乱用，如果某个区域变化很多，出现了渲染问题才会需要分层）</p><h2 id="第五步是绘制"><a href="#第五步是绘制" class="headerlink" title="第五步是绘制"></a>第五步是绘制</h2><p>&emsp;&emsp;主线程会为每一个层单独产生绘制指令集，用于描述这一层的内容该如何画出来。</p><h2 id="第六步分块"><a href="#第六步分块" class="headerlink" title="第六步分块"></a>第六步分块</h2><p>&emsp;&emsp;完成绘制后，主线程将每个图层的绘制信息提交给合成流程，剩余工作将由合成线程完成。<br>合成线程首先对每个图层进行分块，将其划分为更多的小区域。<br>它会从线程池中拿取多个线程来完成分块工作。</p><h2 id="第七步光栅化"><a href="#第七步光栅化" class="headerlink" title="第七步光栅化"></a>第七步光栅化</h2><p>合成线程会将块信息交给GPU进程，以极高的速度完成光栅化。<br>GPU进程会开启多个线程完成光栅化，并且优先处理靠近视口区域的块。<br>光栅化的结果，就是一块一块的位图。</p><h2 id="最后一步-画"><a href="#最后一步-画" class="headerlink" title="最后一步 画"></a>最后一步 画</h2><p>合成线程拿到每个层，每个块的位图后，生成一个个指引信息。<br>之心会标识初每个位图应该画到屏幕的哪个位置，以及考虑刀旋转缩放等变形。<br>变形发生在合成线程，与渲染主线程无关，这既是transform效率高的本质原因。<br>合成线程会把quad提交给GPU进程，由GPU进程产生系统调用，提交给GPU硬件，完成最终屏幕的呈现。</p>]]></content>
      
      
      <categories>
          
          <category> 浏览器的渲染原理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 浏览器的渲染原理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Webpack优化教程</title>
      <link href="/posts/ca484621.html"/>
      <url>/posts/ca484621.html</url>
      
        <content type="html"><![CDATA[<h1 id="webpack优化"><a href="#webpack优化" class="headerlink" title="webpack优化"></a>webpack优化</h1><p>我们会从以下角度来进行优化：<br> 1.提升开发体验<br> 2.提升打包构建速度<br> 3.减少代码体积<br> 4.优化代码运行性能</p><h1 id="提升开发体验"><a href="#提升开发体验" class="headerlink" title="提升开发体验"></a>提升开发体验</h1><h2 id="SourceMap"><a href="#SourceMap" class="headerlink" title="SourceMap"></a>SourceMap</h2><p>  webpack编译后的所有 css 和 js 合并成了一个文件，并且多了其他代码。此时如果代码运行出错那么提示代码错误位置我们是看不懂的。一旦将来开发代码文件很多，那么很难去发现错误出现在哪里。</p><p>  这时我们可以通过SourceMap（源代码映射）是一个用来生成源代码与构建后代码一一映射的文件的方案。<br>  它会生成一个 xxx.map 文件，里面包含源代码和构建后代码每一行、每一列的映射关系。当构建后代码出错了，会通过 xxx.map 文件，从构建后代码出错位置找到映射后源代码出错位置，从而让浏览器提示源代码文件出错位置，帮助我们更快的找到错误根源。</p><h1 id="提升打包构建速度"><a href="#提升打包构建速度" class="headerlink" title="提升打包构建速度"></a>提升打包构建速度</h1><h2 id="HotModuleReplacement"><a href="#HotModuleReplacement" class="headerlink" title="HotModuleReplacement"></a>HotModuleReplacement</h2><p>  开发时我们修改了其中一个模块代码，Webpack 默认会将所有模块全部重新打包编译，速度很慢。<br>  所以我们需要做到修改某个模块代码，就只有这个模块代码需要重新打包编译，其他模块不变，这样打包速度就能很快。</p><p>  HotModuleReplacement（HMR/热模块替换）：在程序运行中，替换、添加或删除模块，而无需重新加载整个页面。</p><h2 id="OneOf"><a href="#OneOf" class="headerlink" title="OneOf"></a>OneOf</h2><p>   打包时每个文件都会经过所有 loader 处理，虽然因为 test 正则原因实际没有处理上，但是都要过一遍。比较慢。<br>   这时可以使用OneOf 顾名思义就是只能匹配上一个 loader, 剩下的就不匹配了。</p><h2 id="Include-Exclude"><a href="#Include-Exclude" class="headerlink" title="Include/Exclude"></a>Include/Exclude</h2><p>  开发时我们需要使用第三方的库或插件，所有文件都下载到 node_modules 中了。而这些文件是不需要编译可以直接使用的。<br>  所以我们在对 js 文件处理时，要排除 node_modules 下面的文件。</p><p>  include<br>  包含，只处理 xxx 文件<br>  exclude<br>  排除，除了 xxx 文件以外其他文件都处理</p><h2 id="Cache"><a href="#Cache" class="headerlink" title="Cache"></a>Cache</h2><p>  每次打包时 js 文件都要经过 Eslint 检查 和 Babel 编译，速度比较慢。<br>  我们可以缓存之前的 Eslint 检查 和 Babel 编译结果，这样第二次打包时速度就会更快了</p><h2 id="Thead"><a href="#Thead" class="headerlink" title="Thead"></a>Thead</h2><p>   当项目越来越庞大时，打包速度越来越慢，甚至于需要一个下午才能打包出来代码。这个速度是比较慢的。<br>   我们想要继续提升打包速度，其实就是要提升 js 的打包速度，因为其他文件都比较少。<br>   而对 js 文件处理主要就是 eslint 、babel、Terser 三个工具，所以我们要提升它们的运行速度。<br>   我们可以开启多进程同时处理 js 文件，这样速度就比之前的单进程打包更快了。</p><p>   多进程打包：开启电脑的多个进程同时干一件事，速度更快。<br>   需要注意：请仅在特别耗时的操作中使用，因为每个进程启动就有大约为 600ms 左右开销。</p><h1 id="减少代码体积"><a href="#减少代码体积" class="headerlink" title="减少代码体积"></a>减少代码体积</h1><h2 id="Tree-Shaking"><a href="#Tree-Shaking" class="headerlink" title="Tree Shaking"></a>Tree Shaking</h2><p>   Webpack 已经默认开启了这个功能，通常用于移除 JavaScript 中的没有使用上的代码。</p><h2 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h2><p>   Babel 为编译的每个文件都插入了辅助代码，使代码体积过大！<br>   Babel 对一些公共方法使用了非常小的辅助代码，比如 _extend。默认情况下会被添加到每一个需要它的文件中。<br>   你可以将这些辅助代码作为一个独立模块，来避免重复引入。</p><p>   @babel/plugin-transform-runtime: 禁用了 Babel 自动对每个文件的 runtime 注入，而是引入 @babel/plugin-transform-runtime 并且使所有辅助代码从这里引用。</p><h2 id="Image-Minimizer"><a href="#Image-Minimizer" class="headerlink" title="Image Minimizer"></a>Image Minimizer</h2><p>   开发如果项目中引用了较多图片，那么图片体积会比较大，将来请求速度比较慢。<br>   我们可以对图片进行压缩，减少图片体积。<br>   注意：如果项目中图片都是在线链接，那么就不需要了。本地项目静态图片才需要进行压缩。</p><p>   image-minimizer-webpack-plugin: 用来压缩图片的插件</p><h1 id="优化代码运行性能"><a href="#优化代码运行性能" class="headerlink" title="优化代码运行性能"></a>优化代码运行性能</h1><h2 id="Code-Split"><a href="#Code-Split" class="headerlink" title="Code Split"></a>Code Split</h2><p>  打包代码时会将所有 js 文件打包到一个文件中，体积太大了。我们如果只要渲染首页，就应该只加载首页的 js 文件，其他文件不应该加载。<br>  所以我们需要将打包生成的文件进行代码分割，生成多个 js 文件，渲染哪个页面就只加载某个 js 文件，这样加载的资源就少，速度就更快。</p><p>  代码分割（Code Split）主要做了两件事：<br>    1.分割文件：将打包生成的文件进行分割，生成多个 js 文件。<br>    2.按需加载：需要哪个文件就加载哪个文件。</p><h2 id="Preload-Prefetch"><a href="#Preload-Prefetch" class="headerlink" title="Preload / Prefetch"></a>Preload / Prefetch</h2><p>  用处：用户点击按钮时才加载这个资源的，如果资源体积很大，那么用户会感觉到明显卡顿效果。<br>  我们想在浏览器空闲时间，加载后续需要使用的资源。我们就需要用上 Preload 或 Prefetch 技术。</p><p>  Preload：告诉浏览器立即加载资源。<br>  Prefetch：告诉浏览器在空闲时才开始加载资源。</p><p>  它们共同点：<br>    都只会加载资源，并不执行。<br>    都有缓存。</p><p>  它们区别：<br>    Preload加载优先级高，Prefetch加载优先级低。<br>    Preload只能加载当前页面需要使用的资源，Prefetch可以加载当前页面资源，也可以加载下一个页面需要使用的资源。</p><p>  总结：<br>   当前页面优先级高的资源用 Preload 加载。<br>   下一个页面需要使用的资源用 Prefetch 加载。</p><p>  它们的问题：兼容性较差。<br>   Preload 相对于 Prefetch 兼容性好一点。</p><h2 id="Network-Cache"><a href="#Network-Cache" class="headerlink" title="Network Cache"></a>Network Cache</h2><p>   将来开发时我们对静态资源会使用缓存来优化，这样浏览器第二次请求资源就能读取缓存了，速度很快。<br>   但是这样的话就会有一个问题, 因为前后输出的文件名是一样的，都叫 main.js，一旦将来发布新版本，因为文件名没有变化导致浏览器会直接读取缓存，不会加载新资源，项目也就没法更新了。</p><p>   所以我们从文件名入手，确保更新前后文件名不一样，这样就可以做缓存了。</p><p>   什么是Network Cache？<br>     它们都会生成一个唯一的 hash 值。</p><pre><code>fullhash（webpack4 是 hash）每次修改任何一个文件，所有文件名的 hash 至都将改变。所以一旦修改了任何一个文件，整个项目的文件缓存都将失效。chunkhash根据不同的入口文件(Entry)进行依赖文件解析、构建对应的 chunk，生成对应的哈希值。我们 js 和 css 是同一个引入，会共享一个 hash 值。contenthash根据文件内容生成 hash 值，只有文件内容变化了，hash 值才会变化。所有文件 hash 值是独享且不同的</code></pre><h2 id="PWA"><a href="#PWA" class="headerlink" title="PWA"></a>PWA</h2><p>  开发 Web App 项目，项目一旦处于网络离线情况，就没法访问了。<br>  我们希望给项目提供离线体验。</p><p>  是什么PWA？<br>   渐进式网络应用程序(progressive web application - PWA)：是一种可以提供类似于 native app(原生应用程序) 体验的 Web App 的技术。<br>   其中最重要的是，在 离线(offline) 时应用程序能够继续运行功能。<br>   内部通过 Service Workers 技术实现的。</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><pre><code>我们从 4 个角度对 webpack 和代码进行了优化：提升开发体验使用 Source Map 让开发或上线时代码报错能有更加准确的错误提示。提升 webpack 提升打包构建速度使用 HotModuleReplacement 让开发时只重新编译打包更新变化了的代码，不变的代码使用缓存，从而使更新速度更快。使用 OneOf 让资源文件一旦被某个 loader 处理了，就不会继续遍历了，打包速度更快。使用 Include/Exclude 排除或只检测某些文件，处理的文件更少，速度更快。使用 Cache 对 eslint 和 babel 处理的结果进行缓存，让第二次打包速度更快。使用 Thead 多进程处理 eslint 和 babel 任务，速度更快。（需要注意的是，进程启动通信都有开销的，要在比较多代码处理时使用才有效果）减少代码体积使用 Tree Shaking 剔除了没有使用的多余代码，让代码体积更小。使用 @babel/plugin-transform-runtime 插件对 babel 进行处理，让辅助代码从中引入，而不是每个文件都生成辅助代码，从而体积更小。使用 Image Minimizer 对项目中图片进行压缩，体积更小，请求速度更快。（需要注意的是，如果项目中图片都是在线链接，那么就不需要了。本地项目静态图片才需要进行压缩。）优化代码运行性能使用 Code Split 对代码进行分割成多个 js 文件，从而使单个文件体积更小，并行加载 js 速度更快。并通过 import 动态导入语法进行按需加载，从而达到需要使用时才加载该资源，不用时不加载资源。使用 Preload / Prefetch 对代码进行提前加载，等未来需要使用时就能直接使用，从而用户体验更好。使用 Network Cache 能对输出资源文件进行更好的命名，将来好做缓存，从而用户体验更好。使用 Core-js 对 js 进行兼容性处理，让我们代码能运行在低版本浏览器。使用 PWA 能让代码离线也能访问，从而提升用户体验。</code></pre>]]></content>
      
      
      <categories>
          
          <category> 前端开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Webpack基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2面试题常问面试题</title>
      <link href="/posts/f50a3637.html"/>
      <url>/posts/f50a3637.html</url>
      
        <content type="html"><![CDATA[<h1 id="对MVVM的理解："><a href="#对MVVM的理解：" class="headerlink" title="对MVVM的理解："></a>对MVVM的理解：</h1><p>&emsp;&emsp;MVVM 由 Model、View、ViewModel 三部分构成，Model 层代表数据模型，也可以在Model中定义数据修改和操作的业务逻辑；View 代表UI 组件，它负责将数据模型转化成UI 展现出来；ViewModel 是一个同步View 和 Model的对象。<br>&emsp;&emsp;在MVVM架构下，View 和 Model 之间并没有直接的联系，而是通过ViewModel进行交互，Model 和 ViewModel 之间的交互是双向的， 因此View 数据的变化会同步到Model中，而Model 数据的变化也会立即反应到View 上。<br>&emsp;&emsp;ViewModel 通过双向数据绑定把 View 层和 Model 层连接了起来，而View 和 Model 之间的同步工作完全是自动的，无需人为干涉，因此开发者只需关注业务逻辑，不需要手动操作DOM， 不需要关注数据状态的同步问题，复杂的数据状态维护完全由 MVVM 来统一管理。</p><h1 id="Vue数据双向绑定的原理："><a href="#Vue数据双向绑定的原理：" class="headerlink" title="Vue数据双向绑定的原理："></a>Vue数据双向绑定的原理：</h1><p>&emsp;&emsp;实现mvvm的数据双向绑定，是采用数据劫持结合发布者-订阅者模式的方式，通过Object.defineProperty()来给各个属性添加setter，getter并劫持监听，在数据变动时发布消息给订阅者，触发相应的监听回调。就必须要实现以下几点：<br>1、实现一个数据监听器Observer，能够对数据对象的所有属性进行监听，如有变动可拿到最新值并通知订阅者<br>2、实现一个指令解析器Compile，对每个元素节点的指令进行扫描和解析，根据指令模板替换数据，以及绑定相应的更新函数<br>3、实现一个Watcher，作为连接Observer和Compile的桥梁，能够订阅并收到每个属性变动的通知，执行指令绑定的相应回调函数，从而更新视图<br><img src="https://img01.anzhiy.cn/useruploads/0/2023/04/26/6448d2fbb605e.png"></p><h1 id="Vue响应式原理"><a href="#Vue响应式原理" class="headerlink" title="Vue响应式原理"></a>Vue响应式原理</h1><p>&emsp;&emsp;Object.defineProperty 为对象中的每一个属性，设置get和set方法，每个声明的属性，都会有一个专属的依赖收集器 subs，当页面使用到某个属性时，触发ObjectdefineProperty get函数，页面的watcher就会被放到属性的依赖收集器subs中，在数据变化时，通知更新；<br>当数据改变的时候，会触发Object.defineProperty - set函数，数据会遍历自己的 依赖收集器 subs，逐个通知 watcher，视图开始更新；</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;aaaa&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&#x27;name&#x27;</span>, &#123;</span><br><span class="line"><span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">get</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`你访问了obj.name属性哦`</span>);</span><br><span class="line"><span class="keyword">return</span> value;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">set</span>: <span class="keyword">function</span> (<span class="params">val</span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`设置obj.name的值为：<span class="subst">$&#123;val&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">name</span>)</span><br><span class="line">obj.<span class="property">name</span> = <span class="string">&#x27;bbbb&#x27;</span></span><br></pre></td></tr></table></figure><h1 id="vue中组件的data为什么是一个函数？而new-Vue-实例里，data-可以直接是一个对象"><a href="#vue中组件的data为什么是一个函数？而new-Vue-实例里，data-可以直接是一个对象" class="headerlink" title="vue中组件的data为什么是一个函数？而new Vue 实例里，data 可以直接是一个对象"></a>vue中组件的data为什么是一个函数？而new Vue 实例里，data 可以直接是一个对象</h1><p>&emsp;&emsp;Vue的data数据其实是Vue原型上的属性，数据存在于内存当中。Vue为了保证每个实例上的data数据的独立性，规定了必须使用函数，而不是对象。因为使用对象的话，每个实例（组件）上使用的data数据是相互影响的，这当然就不是我们想要的了。对象是对于内存地址的引用，直接定义个对象的话组件之间都会使用这个对象，这样会造成组件之间数据相互影响。使用函数后，使用的是data()函数，data()函数中的this指向的是当前实例本身，就不会相互影响了。而 new Vue 的实例，是不会被复用的，因此不存在引用对象的问题。</p><h1 id="vue中created与mounted区别"><a href="#vue中created与mounted区别" class="headerlink" title="vue中created与mounted区别"></a>vue中created与mounted区别</h1><p>&emsp;&emsp;在created阶段，实例已经被初始化，但是还没有挂载至el上，所以我们无法获取到对应的节点，但是此时我们是可以获取到vue中data与methods中的数据的；<br>&emsp;&emsp;在mounted阶段，vue的template成功挂载在$el中，此时一个完整的页面已经能够显示在浏览器中，所以在这个阶段，可以调用节点了；</p><h1 id="Vue中computed与method的区别"><a href="#Vue中computed与method的区别" class="headerlink" title="Vue中computed与method的区别"></a>Vue中computed与method的区别</h1><p>&emsp;&emsp;相同点:<br>&emsp;&emsp;&emsp;&emsp;如果作为模板的数据显示，二者能实现响应的功能，唯一不同的是methods定义的方法需要执行<br>&emsp;&emsp;不同点：</p><ul><li>1.computed 会基于响应数据缓存，methods不会缓存；</li><li>2.diff之前先看data里的数据是否发生变化，如果没有变化computed的方法不会执行，但methods里的方法会执行</li><li>3.computed是属性调用，而methods是函数调用</li></ul><h1 id="虚拟DOM中key的作用"><a href="#虚拟DOM中key的作用" class="headerlink" title="虚拟DOM中key的作用"></a>虚拟DOM中key的作用</h1><p>&emsp;&emsp;简单的说：key是虚拟DOM对象的标识，在更新显示时key起着极其重要的作用。<br>&emsp;&emsp;复杂的说：当状态中的数据发生了变化时，vue会根据【新数据】生成【新的虚拟DOM】，随后<br>进行【新虚拟DOM】与【旧虚拟DOM】的diff比较，比较规则如下：</p><p>&emsp;&emsp;旧虚拟DOM中找到了与新虚拟DOM相同的key</p><ul><li>1.若虚拟DOM中的内容没有变，直接使用之前的真是DOM</li><li>2.若虚拟DOM中内容变了，则生成新的真实DOM，随后替换掉页面中之前的真实DOM</li><li>3.旧虚拟DOM中未找到与新虚拟DOM相同的key</li><li>4.根据数据创建新的真实DOM，随后渲染到页面</li></ul><p>&emsp;&emsp;用index作为key可能会引发的问题<br>&emsp;&emsp;&emsp;&emsp;若对数据进行：逆序添加/逆序删除等破坏顺序的操作，会产生没有必要的真实DOM更新，界面效果虽然没有问题，但是数据过多的话，会效率过低；<br>&emsp;&emsp;&emsp;&emsp;如果结构中还包含输入类的DOM，会产生错误DOM更新，界面有问题；<br>&emsp;&emsp;&emsp;&emsp;注意！如果不存在对数据的逆序操作，仅用于渲染表用于展示，使用index作为key是没有问题的。</p><h1 id="Vue中watch用法详解"><a href="#Vue中watch用法详解" class="headerlink" title="Vue中watch用法详解"></a>Vue中watch用法详解</h1><p>&emsp;&emsp;在vue中，使用watch来监听数据的变化；</p><ul><li>1.监听的数据后面可以写成对象形式，包含handler方法，immediate和deep。</li><li>2.immediate表示在watch中首次绑定的时候，是否执行handler，值为true则表示在watch中声明的时候，就立即执行handler方法，值为false，则和一般使用watch一样，在数据发生变化的时候才执行handler。</li><li>3.当需要监听一个对象的改变时，普通的watch方法无法监听到对象内部属性的改变，只有data中的数据才能够监听到变化，此时就需要deep属性对对象进行深度监听。</li></ul><h1 id="vue中对mixins的理解和使用"><a href="#vue中对mixins的理解和使用" class="headerlink" title="vue中对mixins的理解和使用"></a>vue中对mixins的理解和使用</h1><p>&emsp;&emsp;将组件的公共逻辑或者配置提取出来，哪个组件需要用到时，直接将提取的这部分混入到组件内部即可。这样既可以减少代码冗余度，也可以让后期维护起来更加容易。<br>&emsp;&emsp;这里需要注意的是：提取的是逻辑或配置，而不是HTML代码和CSS代码。其实大家也可以换一种想法，mixin就是组件中的组件，Vue组件化让我们的代码复用性更高，那么组件与组件之间还有重复部分，我们使用Mixin在抽离一遍。<br>&emsp;&emsp;可以理解为minins就是组件的组件  让可复用的组件提取出来供大家使用</p><p>&emsp;&emsp; 定义mixin也非常简单，它就是一个对象而已，只不过这个对象里面可以包含Vue组件中的一些常见配置，如data、methods、created等等。然后引入就可以了  并且各个组件引入是独立的，A组件修改了mixin的值并不会影响B组件的mixin</p><h1 id="vue中的插槽"><a href="#vue中的插槽" class="headerlink" title="vue中的插槽"></a>vue中的插槽</h1><h2 id="定义："><a href="#定义：" class="headerlink" title="定义："></a>定义：</h2><p>&emsp;&emsp;插槽的使用过程其实是抽取共性、保留不同；<br>&emsp;&emsp;我们会将共同的元素、内容依然在组件内进行封装；<br>&emsp;&emsp;同时会将不同的元素使用slot作为占位，让外部决定到底显示什么样的元素；</p><p>&emsp;&emsp;使用方法：</p><ul><li>Vue中将 <slot> 元素作为承载分发内容的出口；</li><li>在封装组件中，使用特殊的元素<slot>就可以为封装组件开启一个插槽；</li><li>该插槽插入什么内容取决于父组件如何使用；</li></ul><p>&emsp;&emsp;默认插槽：<br>&emsp;&emsp;当然这个默认的内容只会在没有提供插入的内容时，才会显示；</p><p>&emsp;&emsp;具名插槽：<br>&emsp;&emsp;当有多个插槽，并且想要插槽对应的显示使用具名插槽；</p><p>&emsp;&emsp;作用域<br>&emsp;&emsp;那就是在父组件中访问子组件的数据，或者从数据流向的角度来讲就是将子组件的数据传递到父组件。</p><h1 id="为何Vue采用异步渲染"><a href="#为何Vue采用异步渲染" class="headerlink" title="为何Vue采用异步渲染"></a>为何Vue采用异步渲染</h1><p>&emsp;&emsp;vue是组件级更新，组件内有数据变化时，该组件就会更新。例：this.a = 1、this.b=2(同一个watcher)</p><ul><li>原因：如果不采用异步更新，那么每次更新数据都会对当前组件进行重新渲染。所以为了性能考虑，Vue 会在本轮数据更新后，再去异步更新视图。而不是每当有数据更新，就立即更新视图。</li></ul><p>&emsp;&emsp;过程：</p><ul><li>Vue是异步执行dom更新的，一旦观察到数据变化，Vue就会开启一个队列，然后把在同一个事件循环 (event loop) 中 观察到数据变化的 watcher 推送进这个队列。</li><li>如果这个watcher被触发多次，只会被推送到队列一次。这种缓冲行为可以有效的去掉重复数据，避免不必要的计算和Dom操作。</li><li>而在下一个事件循环时，Vue会清空队列，并进行必要的DOM更新。</li></ul><p>&emsp;&emsp;源码解析：</p><ul><li>数据变化时，通过notify通知watcher进行更新操作；</li><li>通过subs[i].update依次调用watcher的update（未更新视图）；</li><li>将watcher放到队列中，在queueWatcher会根据watcher的id进行去重（多个属性依赖一个watcher），如果队列中没有该watcher就会将该watcher添加到队列中（未更新视图）；</li><li>通过nextTick异步执行flushSchedulerQueue方法刷新watcher队列（更新视图）；</li></ul><h1 id="Vue-的异步更新机制是如何实现的？"><a href="#Vue-的异步更新机制是如何实现的？" class="headerlink" title="Vue 的异步更新机制是如何实现的？"></a>Vue 的异步更新机制是如何实现的？</h1><p>Vue 的异步更新机制的核心是利用了浏览器的异步任务队列来实现的，首选微任务队列，宏任务队列次之。</p><p>当响应式数据更新后，会调用 dep.notify 方法，通知 dep 中收集的 watcher 去执行 update 方法，watcher.update 将 watcher 自己放入一个 watcher 队列（全局的 queue 数组）。</p><p>然后通过 nextTick 方法将一个刷新 watcher 队列的方法（flushSchedulerQueue）放入一个全局的 callbacks 数组中。</p><p>如果此时浏览器的异步任务队列中没有一个叫 flushCallbacks 的函数，则执行 timerFunc 函数，将 flushCallbacks 函数放入异步任务队列。如果异步任务队列中已经存在 flushCallbacks 函数，等待其执行完成以后再放入下一个 flushCallbacks 函数。</p><p>flushCallbacks 函数负责执行 callbacks 数组中的所有 flushSchedulerQueue 函数。</p><p>flushSchedulerQueue 函数负责刷新 watcher 队列，即执行 queue 数组中每一个 watcher 的 run 方法，从而进入更新阶段，比如执行组件更新函数或者执行用户 watch 的回调函数。</p><h1 id="nextTick的理解"><a href="#nextTick的理解" class="headerlink" title="$nextTick的理解"></a>$nextTick的理解</h1><h2 id="用法："><a href="#用法：" class="headerlink" title="用法："></a>用法：</h2><p>在下次 DOM 更新循环结束之后执行延迟回调。在修改数据之后立即使用这个方法，获取更新后的 DOM。<br>为什么？<br>Vue 实现响应式并不是数据发生变化之后 DOM 立即变化，而是按一定的策略进行 DOM 的更新。Vue 在更新 DOM 时是异步执行的。只要侦听到数据变化，Vue 将开启一个队列，并缓冲在同一事件循环中发生的所有数据变更。如果同一个 watcher 被多次触发，只会被推入到队列中一次。这种在缓冲时去除重复数据对于避免不必要的计算和 DOM 操作是非常重要的。然后，在下一个的事件循环“tick”中，Vue 刷新队列并执行实际 (已去重的) 工作。<br>所以为了在数据变化之后等待 Vue 完成更新 DOM，可以在数据变化之后立即使用 Vue.nextTick(callback)。这样回调函数将在 DOM 更新完成后被调用。</p><h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><p>在你更新完数据后，需要及时操作渲染好的 DOM时</p><h1 id="Vue除了核心功能默认内置的指令-，Vue-也允许注册自定义指令。"><a href="#Vue除了核心功能默认内置的指令-，Vue-也允许注册自定义指令。" class="headerlink" title="Vue除了核心功能默认内置的指令 ，Vue 也允许注册自定义指令。"></a>Vue除了核心功能默认内置的指令 ，Vue 也允许注册自定义指令。</h1><p>自定义指令是用来操作DOM的。尽管Vue推崇数据驱动视图的理念，但并非所有情况都适合数据驱动。自定义指令就是一种有效的补充和扩展，不仅可用于定义任何的DOM操作，并且是可复用的。</p><p>添加自定义指令的两种方式：</p><p>全局指令： 通过 Vue.directive() 函数注册一个全局的指令。<br>局部指令：通过组件的 directives 属性，对该组件添加一个局部的指令。</p><h2 id="使用场景："><a href="#使用场景：" class="headerlink" title="使用场景："></a>使用场景：</h2><p>需求：有些网站图片的加载做得非常优雅，在图片未完成加载前，用随机的背景色占位，图片加载完成后才直接渲染出来。用自定义指令可以非常方便的实现这个功能。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span> v-image = <span class="string">&quot;item &quot;</span> v-<span class="keyword">for</span>=<span class="string">&quot;item in imageList&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&quot;image&quot;</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">inserted</span>: <span class="keyword">function</span>(<span class="params">el，binding</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         <span class="keyword">var</span> color = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>,<span class="title function_">random</span>()*<span class="number">1000000</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         el.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;#&quot;</span> + color</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         <span class="keyword">var</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         img.<span class="property">src</span> = binding.<span class="property">vaule</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         img.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123; </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">           el.<span class="property">style</span>.<span class="property">backgroundImage</span> =  “<span class="title function_">url</span>(” + binding.<span class="property">vaule</span> + <span class="string">&quot;)&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">imageList</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">url</span>: <span class="string">&quot;http://consumer-img.huawei.com/content/dam/huawei-cbg-site/greate-china/cn/mkt/homepage/section4/home-s4-p10-plus.jpg&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">url</span>: <span class="string">&quot;http://consumer-img.huawei.com/content/dam/huawei-cbg-site/greate-china/cn/mkt/homepage/section4/home-s4-watch2-pro-banner.jpg&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">url</span>: <span class="string">&quot;http://consumer-img.huawei.com/content/dam/huawei-cbg-site/en/mkt/homepage/section4/home-s4-matebook-x.jpg&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            ]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h1 id="Vue-set-改变数组和对象中的属性"><a href="#Vue-set-改变数组和对象中的属性" class="headerlink" title="Vue.set 改变数组和对象中的属性"></a>Vue.set 改变数组和对象中的属性</h1><p>在一个组件实例中，只有在data里初始化的数据才是响应的，Vue不能检测到对象属性的添加或删除，没有在data里声明的属性不是响应的,所以数据改变了但是不会在页面渲染；<br>解决办法：<br>使用 Vue.set(object, key, value) 方法将响应属性添加到嵌套的对象上</p><h1 id="说说vue的生命周期的理解"><a href="#说说vue的生命周期的理解" class="headerlink" title="说说vue的生命周期的理解"></a>说说vue的生命周期的理解</h1><p><img src="https://img01.anzhiy.cn/useruploads/0/2023/04/26/6448e2b2c5272.png"></p><h1 id="vue通信方式："><a href="#vue通信方式：" class="headerlink" title="vue通信方式："></a>vue通信方式：</h1><ul><li>1、父组件向子组件传递数据 props</li><li>2.子组件向父组件传递数据（$emit的用法）</li><li>3.兄弟组件通信（通过父组件parent）</li><li>4、ref / $refs</li><li>5、eventBus事件总线（$emit / $on）</li><li>6、依赖注入（provide / inject）</li><li>7.$parent / $children</li><li>10.vuex</li></ul>]]></content>
      
      
      <categories>
          
          <category> 面试类 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue2 </tag>
            
            <tag> 面试常问 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js设计模式-策略模式</title>
      <link href="/posts/b0b32b9.html"/>
      <url>/posts/b0b32b9.html</url>
      
        <content type="html"><![CDATA[<h1 id="概念："><a href="#概念：" class="headerlink" title="概念："></a>概念：</h1><p>&emsp;&emsp;定义一系列的算法，把它们一个个封装起来，并且使它们可以相互替换。</p><h1 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h1><p>&emsp;&emsp;策略模式利用组合，委托等技术和思想，有效的避免很多if条件语句。<br>&emsp;&emsp;策略模式提供了开放-封闭原则，使代码更容易理解和扩展。<br>&emsp;&emsp;策略模式中的代码可以复用。</p><h1 id="代码缺点如下："><a href="#代码缺点如下：" class="headerlink" title="代码缺点如下："></a>代码缺点如下：</h1><p>&emsp;&emsp;annualBonus函数包含了很多if-else语句。<br>&emsp;&emsp;annualBonus函数缺乏弹性，假如还有D等级的话，那么我们需要在annualBonus函数内添加判断等级D的if语句；<br>&emsp;&emsp;算法复用性差，如果在其他的地方也有类似这样的算法的话，但是规则不一样，我们这些代码不能通用。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">annualBonus</span>(<span class="params">salary,level</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(level === <span class="string">&#x27;A&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> salary * <span class="number">4</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(level === <span class="string">&#x27;B&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> salary * <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(level === <span class="string">&#x27;C&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> salary * <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 调用如下：</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">annualBonus</span>(<span class="number">4000</span>,<span class="string">&#x27;A&#x27;</span>)); <span class="comment">// 16000</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">annualBonus</span>(<span class="number">3000</span>,<span class="string">&#x27;B&#x27;</span>)); <span class="comment">// 9000</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 策略模式下：</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="string">&quot;A&quot;</span>: <span class="keyword">function</span>(<span class="params">salary</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> salary * <span class="number">4</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;B&quot;</span> : <span class="keyword">function</span>(<span class="params">salary</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> salary * <span class="number">3</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;C&quot;</span> : <span class="keyword">function</span>(<span class="params">salary</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> salary * <span class="number">2</span>;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">annualBonus</span>(<span class="params">level,salary</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> obj[level](salary);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">annualBonus</span>(<span class="string">&#x27;A&#x27;</span>,<span class="number">10000</span>)); <span class="comment">// 40000</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js设计模式-观察者模式</title>
      <link href="/posts/f4a69292.html"/>
      <url>/posts/f4a69292.html</url>
      
        <content type="html"><![CDATA[<h1 id="定义："><a href="#定义：" class="headerlink" title="定义："></a>定义：</h1><p>&emsp;&emsp;在对象之间定义一个一对多的依赖，当一个对象状态改变的时候，所有依赖的对象都会自动收到通知。</p><h1 id="观察者模式和发布-订阅模式一样么？"><a href="#观察者模式和发布-订阅模式一样么？" class="headerlink" title="观察者模式和发布-订阅模式一样么？"></a>观察者模式和发布-订阅模式一样么？</h1><p>&emsp;&emsp;不一样！<br>&emsp;&emsp;观察者模式会直接通知订阅者<br>&emsp;&emsp;发布-订阅不会直接通知订阅者，而是通过第三个角色事件调度中心来实现通知订阅者</p><h1 id="例子："><a href="#例子：" class="headerlink" title="例子："></a>例子：</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">function</span> <span class="title function_">SellHome</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">userList</span> = [];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">SellHome</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">attach</span> = <span class="keyword">function</span> (<span class="params">msg</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;11&#x27;</span>, <span class="variable language_">this</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">userList</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">u</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hh&#x27;</span>, u.<span class="property">name</span>+<span class="string">&#x27;&#x27;</span>+msg);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title class_">SellHome</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">listen</span> = <span class="keyword">function</span> (<span class="params">user</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;22&#x27;</span>, <span class="variable language_">this</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">userList</span>.<span class="title function_">push</span>(user);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> u1 = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;小明&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> u2 = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;小红&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="title class_">SellHome</span>();</span><br><span class="line">s.<span class="title function_">listen</span>(u1);</span><br><span class="line">s.<span class="title function_">listen</span>(u2);</span><br><span class="line"></span><br><span class="line">s.<span class="title function_">attach</span>(<span class="string">&#x27;吃饭啦&#x27;</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js设计模式-装饰器模式</title>
      <link href="/posts/f55bc382.html"/>
      <url>/posts/f55bc382.html</url>
      
        <content type="html"><![CDATA[<h1 id="装饰器模式"><a href="#装饰器模式" class="headerlink" title="装饰器模式"></a>装饰器模式</h1><p>&emsp;&emsp;为对象添加新功能,不改变其原有的结构和功能,和适配器模式不一样，适配器模式是原有的不能用了，而装饰器模式是原来的还能用，不过给增加一些功能。<br>&emsp;&emsp;比如： 手机壳，用来给手机美观，保护，防滑等等</p><h1 id="例子："><a href="#例子：" class="headerlink" title="例子："></a>例子：</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">    <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;画一个圆形&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Decorator</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">circle</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">circle</span> = circle;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">circle</span>.<span class="title function_">draw</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setRedBorder</span>(<span class="variable language_">this</span>.<span class="property">circle</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">setRedBorder</span>(<span class="params">circle</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;设置红色边框&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 测试代码</span></span><br><span class="line"><span class="keyword">let</span> circle = <span class="keyword">new</span> <span class="title class_">Circle</span>();</span><br><span class="line">circle.<span class="title function_">draw</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> dec = <span class="keyword">new</span> <span class="title class_">Decorator</span>(circle);</span><br><span class="line">dec.<span class="title function_">draw</span>();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js设计模式-适配器模式</title>
      <link href="/posts/9b47c56e.html"/>
      <url>/posts/9b47c56e.html</url>
      
        <content type="html"><![CDATA[<h1 id="什么是适配器模式"><a href="#什么是适配器模式" class="headerlink" title="什么是适配器模式"></a>什么是适配器模式</h1><p>&emsp;&emsp;适配器模式：将一个类（对象）的接口（方法或属性）转化成客户希望的另外一个接口（方法或属性），使得原本由于接口不兼容而不能一起工作的那些类（对象）可以正常协作。简单理解就是为兼容而生的 “转换器”</p><h1 id="例子："><a href="#例子：" class="headerlink" title="例子："></a>例子：</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Adapter</span> &#123;</span><br><span class="line"><span class="title function_">specificRequest</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;德国标准插头&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Target</span> &#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">adapter</span> = <span class="keyword">new</span> <span class="title class_">Adapter</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">request</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">let</span> info = <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.adapter.specificRequest()&#125;</span>---转换成---中国插头`</span></span><br><span class="line"><span class="keyword">return</span> info</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> target = <span class="keyword">new</span> <span class="title class_">Target</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">info</span>(target.<span class="title function_">request</span>())</span><br><span class="line"></span><br><span class="line"><span class="comment">// $(&#x27;selector&#x27;).on 的实现</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">on</span>(<span class="params">target, event, callback</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (target.<span class="property">addEventListener</span>) &#123;</span><br><span class="line">        <span class="comment">// 标准事件监听</span></span><br><span class="line">        target.<span class="title function_">addEventListener</span>(event, callback);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target.<span class="property">attachEvent</span>) &#123;</span><br><span class="line">        <span class="comment">// IE低版本事件监听</span></span><br><span class="line">        target.<span class="title function_">attachEvent</span>(event, callback)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 低版本浏览器事件监听</span></span><br><span class="line">        target[<span class="string">`on<span class="subst">$&#123;event&#125;</span>`</span>] = callback</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js设计模式-建造者模式</title>
      <link href="/posts/90039cb8.html"/>
      <url>/posts/90039cb8.html</url>
      
        <content type="html"><![CDATA[<h1 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h1><p>&emsp;&emsp;将一个复杂对象的构建层与其表示层分离，同样的构建过程可以采用不同的并表示</p><h1 id="与工厂模式的区别"><a href="#与工厂模式的区别" class="headerlink" title="与工厂模式的区别"></a>与工厂模式的区别</h1><p>&emsp;&emsp;工厂模式主要是为了创建对象实例或者类簇（抽象工厂），关心的是最终产出(创建)的是什么，而不关心创建的过程。<br>&emsp;&emsp;而建造者模式关心的是创建这个对象的整个过程，甚至于创建对象的每一个细节。 以下以创建应聘者为例：应聘者有兴趣爱好，姓名和期望的职位等等</p><h1 id="解决的问题"><a href="#解决的问题" class="headerlink" title="解决的问题"></a>解决的问题</h1><p>&emsp;&emsp;方便用户创建复杂的对象（不需要知道实现过程）<br>&emsp;&emsp;代码复用性 &amp; 封装性（将对象构建过程和细节进行封装 &amp; 复用）</p><h1 id="例子："><a href="#例子：" class="headerlink" title="例子："></a>例子：</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个人</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">PersonBuilder</span>(<span class="params">params</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">skill</span> = (params &amp;&amp; params.<span class="property">skill</span>) || <span class="string">&quot;保密&quot;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">hbody</span> = (params &amp;&amp; params.<span class="property">hbody</span>) || <span class="string">&quot;保密&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 人的原型方法</span></span><br><span class="line">  <span class="title class_">PersonBuilder</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span><br><span class="line">    <span class="attr">getSkill</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">skill</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">getHbody</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">hbody</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"> <span class="comment">//实例化姓名类</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Named</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span>;</span><br><span class="line">    (<span class="keyword">function</span> (<span class="params">name, that</span>) &#123;</span><br><span class="line">      that.<span class="property">wholeName</span> = name;</span><br><span class="line">      <span class="keyword">if</span> (name.<span class="title function_">indexOf</span>(<span class="string">&quot; &quot;</span>) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">        that.<span class="property">firstName</span> = name.<span class="title function_">slice</span>(<span class="number">0</span>, name.<span class="title function_">indexOf</span>(<span class="string">&quot; &quot;</span>));</span><br><span class="line">        that.<span class="property">secondName</span> = name.<span class="title function_">slice</span>(name.<span class="title function_">indexOf</span>(<span class="string">&quot; &quot;</span>));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)(name, that);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//实例化职位类</span></span><br><span class="line">  <span class="keyword">var</span> <span class="title class_">Work</span> = <span class="keyword">function</span> (<span class="params">work</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="comment">//构造器</span></span><br><span class="line">    <span class="comment">//构造函数中通过传入的职位特征来设置相应职位以及描述</span></span><br><span class="line">    (<span class="keyword">function</span> (<span class="params">work, that</span>) &#123;</span><br><span class="line">      <span class="keyword">switch</span> (work) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;code&quot;</span>:</span><br><span class="line">          that.<span class="property">work</span> = <span class="string">&quot;工程师&quot;</span>;</span><br><span class="line">          that.<span class="property">workDescript</span> = <span class="string">&quot;每天沉醉于编程&quot;</span>;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;UI&quot;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;UE&quot;</span>:</span><br><span class="line">          that.<span class="property">work</span> = <span class="string">&quot;设计师&quot;</span>;</span><br><span class="line">          that.<span class="property">workDescript</span> = <span class="string">&quot;设计更似一种艺术&quot;</span>;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;teach&quot;</span>:</span><br><span class="line">          that.<span class="property">work</span> = <span class="string">&quot;教师&quot;</span>;</span><br><span class="line">          that.<span class="property">workDescript</span> = <span class="string">&quot;分享也是一种快乐&quot;</span>;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">          that.<span class="property">work</span> = work;</span><br><span class="line">          that.<span class="property">workDescript</span> = <span class="string">&quot;对不起，我们还不清楚您所选择职位的相关描述&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)(work, that);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">//更换期望的职位</span></span><br><span class="line">  <span class="title class_">Work</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">changeWork</span> = <span class="keyword">function</span> (<span class="params">work</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">work</span> = work;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">//添加对职位的描述</span></span><br><span class="line">  <span class="title class_">Work</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">changeDescript</span> = <span class="keyword">function</span> (<span class="params">sentence</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">workDescript</span> = sentence;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, work</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> _person = <span class="keyword">new</span> <span class="title class_">PersonBuilder</span>();</span><br><span class="line">  </span><br><span class="line">    _person.<span class="property">name</span> = <span class="keyword">new</span> <span class="title class_">Named</span>(name);</span><br><span class="line">    _person.<span class="property">work</span> = <span class="keyword">new</span> <span class="title class_">Work</span>(work);</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> _person;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;xiao ming&quot;</span>, <span class="string">&quot;code&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(person);</span><br><span class="line">  person.<span class="property">work</span>.<span class="title function_">changeDescript</span>(<span class="string">&quot;更改描述！&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">work</span>.<span class="property">workDescript</span>); <span class="comment">//更改描述！</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js设计模式-工厂模式</title>
      <link href="/posts/2d900bbb.html"/>
      <url>/posts/2d900bbb.html</url>
      
        <content type="html"><![CDATA[<h1 id="什么是工厂模式："><a href="#什么是工厂模式：" class="headerlink" title="什么是工厂模式："></a>什么是工厂模式：</h1><p>&emsp;&emsp;工厂模式其实就是封装对象的创建过程，使得创建对象的逻辑与使用对象的逻辑分离开来。</p><h2 id="简单工程模式"><a href="#简单工程模式" class="headerlink" title="简单工程模式"></a>简单工程模式</h2><p>&emsp;&emsp;简单工厂模式又叫静态工厂模式，由一个工厂对象决定创建某一种产品对象类的实例。主要用来创建同一类对象。</p><h1 id="例子："><a href="#例子：" class="headerlink" title="例子："></a>例子：</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//User类</span></span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="comment">//构造器</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">opt</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = opt.<span class="property">name</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">viewPage</span> = opt.<span class="property">viewPage</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//静态方法</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">getInstance</span>(<span class="params">role</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (role) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;superAdmin&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;超级管理员&#x27;</span>, <span class="attr">viewPage</span>: [<span class="string">&#x27;首页&#x27;</span>, <span class="string">&#x27;通讯录&#x27;</span>, <span class="string">&#x27;发现页&#x27;</span>, <span class="string">&#x27;应用数据&#x27;</span>, <span class="string">&#x27;权限管理&#x27;</span>] &#125;);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;admin&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;管理员&#x27;</span>, <span class="attr">viewPage</span>: [<span class="string">&#x27;首页&#x27;</span>, <span class="string">&#x27;通讯录&#x27;</span>, <span class="string">&#x27;发现页&#x27;</span>, <span class="string">&#x27;应用数据&#x27;</span>] &#125;);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;user&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;普通用户&#x27;</span>, <span class="attr">viewPage</span>: [<span class="string">&#x27;首页&#x27;</span>, <span class="string">&#x27;通讯录&#x27;</span>, <span class="string">&#x27;发现页&#x27;</span>] &#125;);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;参数错误, 可选参数:superAdmin、admin、user&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用</span></span><br><span class="line"><span class="keyword">let</span> superAdmin = <span class="title class_">User</span>.<span class="title function_">getInstance</span>(<span class="string">&#x27;superAdmin&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> admin = <span class="title class_">User</span>.<span class="title function_">getInstance</span>(<span class="string">&#x27;admin&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> normalUser = <span class="title class_">User</span>.<span class="title function_">getInstance</span>(<span class="string">&#x27;user&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(superAdmin)</span><br></pre></td></tr></table></figure><h2 id="工厂方法模式"><a href="#工厂方法模式" class="headerlink" title="工厂方法模式"></a>工厂方法模式</h2><p>&emsp;&emsp;将实际创建对象工作推迟到子类当中，核心类就成了抽象类。这样添加新的类时就无需修改工厂方法，只需要将子类注册进工厂方法的原型对象中即可。;</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">FunctionFactory</span>(<span class="params">role</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(!([<span class="string">&#x27;admin&#x27;</span>, <span class="string">&#x27;developer&#x27;</span>].<span class="title function_">indexOf</span>(role) &gt; -<span class="number">1</span>))&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;参数只能为 admin 或 developer&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 安全的工厂方法</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span> <span class="keyword">instanceof</span> <span class="title class_">FunctionFactory</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>[role]();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">FunctionFactory</span>(role);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">FunctionFactory</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">show</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">&#x27;是一个&#x27;</span> + <span class="variable language_">this</span>.<span class="property">role</span> + <span class="string">&#x27;, 权限：&#x27;</span> + <span class="variable language_">this</span>.<span class="property">permissions</span>.<span class="title function_">join</span>(<span class="string">&#x27;, &#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(str)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">FunctionFactory</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">admin</span> = <span class="keyword">function</span> (<span class="params">permissions</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">role</span> = <span class="string">&#x27;管理员&#x27;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">permissions</span> = [<span class="string">&#x27;设置&#x27;</span>, <span class="string">&#x27;删除&#x27;</span>, <span class="string">&#x27;新增&#x27;</span>, <span class="string">&#x27;创建&#x27;</span>, <span class="string">&#x27;开发&#x27;</span>, <span class="string">&#x27;推送&#x27;</span>, <span class="string">&#x27;提问&#x27;</span>, <span class="string">&#x27;评论&#x27;</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">FunctionFactory</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">developer</span> = <span class="keyword">function</span> (<span class="params">permissions</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">role</span> = <span class="string">&#x27;开发者&#x27;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">permissions</span> = [<span class="string">&#x27;开发&#x27;</span>, <span class="string">&#x27;推送&#x27;</span>, <span class="string">&#x27;提问&#x27;</span>, <span class="string">&#x27;评论&#x27;</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xm = <span class="title class_">FunctionFactory</span>(<span class="string">&#x27;admin&#x27;</span>);</span><br><span class="line">xm.<span class="title function_">show</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xh = <span class="keyword">new</span> <span class="title class_">FunctionFactory</span>(<span class="string">&#x27;developer&#x27;</span>);</span><br><span class="line">xh.<span class="title function_">show</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xl = <span class="keyword">new</span> <span class="title class_">FunctionFactory</span>(<span class="string">&#x27;guest&#x27;</span>);</span><br><span class="line">xl.<span class="title function_">show</span>();</span><br></pre></td></tr></table></figure><h3 id="安全工厂模式玩法的好处"><a href="#安全工厂模式玩法的好处" class="headerlink" title="安全工厂模式玩法的好处"></a>安全工厂模式玩法的好处</h3><p>&emsp;&emsp;1.避免使用new关键字。在JavaScript中，使用new关键字创建对象可能会带来一些安全问题，例如可能会被恶意代码利用创建一个用于攻击的对象。安全工厂方法避免了使用new，从而减少了这种风险。<br>&emsp;&emsp;2.可以实现封装和隐藏实现。安全工厂方法可以将关键的创建对象的代码封装在内部，从而隐藏实现细节，提高代码的安全性和可维护性。<br>&emsp;&emsp;3.更易于维护。由于安全工厂方法可以提供统一的访问接口，因此更容易进行代码的维护和升级。<br>&emsp;&emsp;4.可以提高代码的可测试性。由于安全工厂方法可以实现封装和隐藏实现，因此可以更轻松地进行单元测试和集成测试，从而提高代码的质量和可测试性。。</p><!-- ## 抽象工厂模式抽象工厂    只留对外的口子，不做事，留给外界覆盖（子类重写接口方法以便创建的时候指定自己的对象类型）。主要用于对产品类簇的创建，不直接生成实例（简单工厂模式和工厂方法模式都是生成实例）。// 抽象类是一种声明但不能使用的类，子类必须先实现其方法才能调用;// 可以在抽象类中定义一套规范，供子类去继承实现;// 1、优点，通过工厂模式，我们可以快速创建大量相似对象，没有重复代码。// 2、缺点，工厂模式创建的对象属于Object，无法区分对象类型，这也是工厂模式没有广泛使用的原因。// 可以通过构造函数来知道 -->]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js设计模式-单例模式</title>
      <link href="/posts/888898f6.html"/>
      <url>/posts/888898f6.html</url>
      
        <content type="html"><![CDATA[<h1 id="什么是单例模式"><a href="#什么是单例模式" class="headerlink" title="什么是单例模式"></a>什么是单例模式</h1><p>&emsp;&emsp;单例模式（Singleton Pattern）是 Java 中最简单的设计模式之一。这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。<br>&emsp;&emsp;这种模式涉及到一个单一的类，该类负责创建自己的对象，同时确保只有单个对象被创建。这个类提供了一种访问其唯一的对象的方式，可以直接访问，不需要实例化该类的对象。<br>&emsp;&emsp;注意：<br>&emsp;&emsp;1、单例类只能有一个实例。<br>&emsp;&emsp;2、单例类必须自己创建自己的唯一实例。<br>&emsp;&emsp;3、单例类必须给所有其他对象提供这一实例。</p><h1 id="如何实现"><a href="#如何实现" class="headerlink" title="如何实现"></a>如何实现</h1><p>&emsp;&emsp;肯定是有一个变量将第一次new生成的实例对象保存了下来，后面再执行new的时候，就直接返回第一次生成的实例对象，这样就实现了单例。</p><h1 id="主要优点："><a href="#主要优点：" class="headerlink" title="主要优点："></a>主要优点：</h1><p>&emsp;&emsp;1、提供了对唯一实例的受控访问。<br>&emsp;&emsp;2、由于在系统内存中只存在一个对象，因此可以节约系统资源，对于一些需要频繁创建和销毁的对象单例模式无疑可以提高系统的性能。<br>&emsp;&emsp;3、允许可变数目的实例。</p><h1 id="主要缺点："><a href="#主要缺点：" class="headerlink" title="主要缺点："></a>主要缺点：</h1><p>&emsp;&emsp;1、由于单利模式中没有抽象层，因此单例类的扩展有很大的困难。<br>&emsp;&emsp;2、单例类的职责过重，在一定程度上违背了“单一职责原则”。<br>&emsp;&emsp;3、滥用单例将带来一些负面问题，如为了节省资源将数据库连接池对象设计为的单例类，可能会导致共享连接池对象的程序过多而出现连接池溢出；如果实例化的对象长时间不被利用，系统会认为是垃圾而被回收，这将导致对象状态的丢失。</p><h1 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h1><p>&emsp;&emsp;在以下情况下可以考虑使用单例模式：</p><ul><li>(1) 系统只需要一个实例对象，如系统要求提供一个唯一的序列号生成器或资源管理器，或者需要考虑资源消耗太大而只允许创建一个对象。</li><li>(2) 客户调用类的单个实例只允许使用一个公共访问点，除了该公共访问点，不能通过其他途径访问该实例。</li></ul><h1 id="例子："><a href="#例子：" class="headerlink" title="例子："></a>例子：</h1>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">let</span> <span class="title class_">CreateSingleton</span> = (<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> instance;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">name</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance) &#123;</span><br><span class="line">            <span class="keyword">return</span> instance;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="keyword">return</span> instance = <span class="variable language_">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="title class_">CreateSingleton</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getName</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">Winner</span> = <span class="keyword">new</span> <span class="title class_">CreateSingleton</span>(<span class="string">&#x27;Winner&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">Looser</span> = <span class="keyword">new</span> <span class="title class_">CreateSingleton</span>(<span class="string">&#x27;Looser&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Winner</span> === <span class="title class_">Looser</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Winner</span>.<span class="title function_">getName</span>());  <span class="comment">// &#x27;Winner&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Looser</span>.<span class="title function_">getName</span>());  <span class="comment">// &#x27;Winner&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Winner</span>) <span class="comment">// &#x27;Winner&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Looser</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Webpack基础教程</title>
      <link href="/posts/4db0c680.html"/>
      <url>/posts/4db0c680.html</url>
      
        <content type="html"><![CDATA[<h1 id="什么是Webpack"><a href="#什么是Webpack" class="headerlink" title="什么是Webpack"></a>什么是Webpack</h1><p>&emsp;&emsp;webpack是一个打包工具，他的宗旨是一切静态资源皆可打包。有人就会问为什么要webpack？webpack是现代前端技术的基石，常规的开发方式，比如jquery,html,css静态网页开发已经落后了。现在是MVVM的时代，数据驱动界面。webpack它做的事情是，分析你的项目结构，找到JavaScript模块以及其它的一些浏览器不能直接运行的拓展语言（Scss，TypeScript等），并将其打包为合适的格式以供浏览器使用。</p><h2 id="Webpack-五个核心"><a href="#Webpack-五个核心" class="headerlink" title="Webpack 五个核心"></a>Webpack 五个核心</h2><pre><code>1.Entry    入口(Entry)指示Webpack以哪个文件为入口起点开始打包，分析构建内部依赖图。2.Output    输出(Output)指示Webpack打包后的资源bundles输出到哪里去，以及如何命名。3.Loader    Loader让Webpack能够去处理那些非JavaScript文件(webpack自身只理解Javascript)4.Plugins    插件(plugins)可以用于执行范围更广的任务。插件的范围包括，从打包优化和压缩，    一直到重新定义环境中的变量等。5.Mode    模式(mode)指示Webpack使用相应模式的配置    选项：        1)development 能让代码本地调试运行的环境        2)production  能让代码优化上线运行的环境</code></pre><h2 id="图片压缩"><a href="#图片压缩" class="headerlink" title="图片压缩"></a>图片压缩</h2><pre><code>小于8kb 压缩成base64  变成字符串    优势：不需要额外发请求 减少请求资源 降低服务器压力    劣势：体积变大    <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp|svg)$/</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;asset&#x27;</span>, <span class="comment">//会转化成base64</span></span><br><span class="line">    <span class="attr">parser</span>: &#123;</span><br><span class="line">        <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">8</span> * <span class="number">1024</span>, <span class="comment">//8kb</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">generator</span>: &#123;</span><br><span class="line">    <span class="comment">// 输出图片名称</span></span><br><span class="line">    <span class="comment">// [hash:10] 表示只取 前十位</span></span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;static/img/[hash:10][ext][query]&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></code></pre><h2 id="处理js-资源"><a href="#处理js-资源" class="headerlink" title="处理js 资源"></a>处理js 资源</h2><pre><code>有人可能会问，js 资源 Webpack 不能已经处理了吗，为什么我们还要处理呢?    原因是 Webpack 对s 处理是有限的，只能编译s 中 ES 模块化语法，不能编译其他语法，导致s 不能在E 等浏览器运行，所以我们希望做一些兼容性处理。    其次开发中，团队对代码格式是有严格要求的，我们不能由肉眼去检测代码格式，需要使用专业的工具来检测。。针对is兼容性处理，我们便用 Babel 来完成。针对代码格式，我们使用 Eslint 来完成我们先完成 Eslint，检测代码格式无误后，在由 Babel 做代码兼容性处理</code></pre><h2 id="Eslint"><a href="#Eslint" class="headerlink" title="Eslint"></a>Eslint</h2><pre><code>可组装的 JavaScript 和JSX 检查工具这句话意思就是:它是用来检测 is 和sx 语法的工具。可以配置各项功能我们使用 Eslint，关键是写 Eslint 配置文件，里面写上各种 rules 规则，将来运行 Eslint 时就会以写的规则对代码进行检查</code></pre><h2 id="babel"><a href="#babel" class="headerlink" title="babel"></a>babel</h2><pre><code>JavaScript 编译器。主要用于将 ES6 语法编写的代码转换为向后兼容的 JavaScript 语法，以便能够运行在当前和旧版本的浏览器或其他环境 </code></pre><h2 id="开发服务器-amp-自动化"><a href="#开发服务器-amp-自动化" class="headerlink" title="开发服务器&amp;自动化"></a>开发服务器&amp;自动化</h2><pre><code>每次写完代码都需要手动输入指令才能编译代码，太麻烦了，我们希望一切自动化第一步: 下载包    npm i webpack-dev-server -D第二步: 配置    <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开发服务器: : 不会输出资源 不会去进行打包 在内存中打包 </span></span><br><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>, <span class="comment">// 启动服务器域名</span></span><br><span class="line">    <span class="attr">port</span>: <span class="string">&quot;3000&quot;</span>, <span class="comment">// 启动服务器端口号</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">// 是否自动打开浏览器</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></code></pre><h2 id="生产模式"><a href="#生产模式" class="headerlink" title="生产模式"></a>生产模式</h2><pre><code>生产模式是开发完成代码后，我们需要得到代码将来部署上线。这个模式下我们主要对代码进行优化，让其运行性能更好。优化主要从两个角度出发:1.优化代码运行性能2.优化代码打包速度</code></pre><h2 id="Css-处理"><a href="#Css-处理" class="headerlink" title="Css 处理"></a>Css 处理</h2><pre><code>#提取 Css 成单独文件Css 文件目前被打包到 js 文件中，当 js 文件加载时，会创建一个 style 标签来生成样式这样对于网站来说，会出现闪屏现象，用户体验不好我们应该是单独的 Css 文件，通过 link 标签加载性能才好npm i mini-css-extract-plugin -D</code></pre><h2 id="Css-兼容性处理"><a href="#Css-兼容性处理" class="headerlink" title="Css 兼容性处理"></a>Css 兼容性处理</h2><pre><code>1. 下载包npm i postcss-loader postcss postcss-preset-env -Dcss-loder 下面<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">            <span class="attr">plugins</span>: [</span><br><span class="line">              <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// 能解决大多数样式兼容性问题</span></span><br><span class="line">            ],</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>再去package.json 取配置  兼容到什么程度</code></pre><h1 id="开发模式参考：-生产模式稍加修改就可以"><a href="#开发模式参考：-生产模式稍加修改就可以" class="headerlink" title="开发模式参考：(生产模式稍加修改就可以)"></a>开发模式参考：(生产模式稍加修改就可以)</h1><pre><code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    webpack.config.js webpack的配置文件</span></span><br><span class="line"><span class="comment">        作用：指示webpack干哪些活（当你运行webpack指令时，会加载里面的配置）</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    所有构建工具都是基于nodejs平台运行~ 模块化默认采用commonjs</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// resoleve用来拼接绝对路径的方法</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;eslint-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用来获取样式的loader</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getStyle</span>(<span class="params">pre</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>[</span><br><span class="line">        <span class="comment">//   &#x27;style-loader&#x27;, // 将js种css通过创建style标签 添加到html文件中生效</span></span><br><span class="line">        <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>, <span class="comment">// 提取css成单独的文件</span></span><br><span class="line">        <span class="string">&#x27;css-loader&#x27;</span>, <span class="comment">//将css编译成commonjs模块到js种</span></span><br><span class="line">        &#123;</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">        <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">            <span class="attr">plugins</span>: [</span><br><span class="line">                <span class="string">&quot;postcss-preset-env&quot;</span>, <span class="comment">// 能解决大多数样式兼容性问题</span></span><br><span class="line">            ],</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        pre,</span><br><span class="line">    ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">// 写webpack配置</span></span><br><span class="line">    <span class="comment">// 入口起点</span></span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">    <span class="comment">// 输出</span></span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="comment">// 所有文件的输出路径</span></span><br><span class="line">        <span class="comment">// 入口文件打包输出文件名</span></span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;static/js/dist.js&#x27;</span>,</span><br><span class="line">        <span class="comment">// 输出路径</span></span><br><span class="line">        <span class="comment">// _dirname nodejs的变量，代表当前文件的目录绝对路径</span></span><br><span class="line">        <span class="comment">// path: path.resolve(__dirname, &#x27;../dist&#x27;),</span></span><br><span class="line">        <span class="comment">// 开发模式 无需输出</span></span><br><span class="line">        <span class="attr">path</span>: <span class="literal">undefined</span>, </span><br><span class="line">        <span class="comment">// 自动清空上次打包</span></span><br><span class="line">        <span class="comment">// 原理：将path整个目录清空 再打包</span></span><br><span class="line">        <span class="attr">clean</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 加载器</span></span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="comment">// loader的配置</span></span><br><span class="line">        <span class="attr">rules</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// 每个文件只能被其中的一个loader配置处理</span></span><br><span class="line">                <span class="attr">oneOf</span>:[</span><br><span class="line">                    &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="comment">//只检测 css</span></span><br><span class="line">                        <span class="attr">use</span>: <span class="title function_">getStyle</span>()</span><br><span class="line">                    &#125;, <span class="comment">// 执行顺序 从右到左  从下到上</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">                        <span class="attr">use</span>: <span class="title function_">getStyle</span>(<span class="string">&#x27;less-loader&#x27;</span>)</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|webp|svg)$/</span>,</span><br><span class="line">                        <span class="attr">type</span>: <span class="string">&#x27;asset&#x27;</span>, <span class="comment">//会转化成base64</span></span><br><span class="line">                        <span class="attr">parser</span>: &#123;</span><br><span class="line">                            <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">                                <span class="attr">maxSize</span>: <span class="number">8</span> * <span class="number">1024</span>, <span class="comment">//8kb</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="attr">generator</span>: &#123;</span><br><span class="line">                            <span class="comment">// 输出图片名称</span></span><br><span class="line">                            <span class="comment">// [hash:10] 表示只取 前十位</span></span><br><span class="line">                            <span class="attr">filename</span>: <span class="string">&#x27;static/img/[hash:10][ext][query]&#x27;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">test</span>: <span class="regexp">/\.(ttf|woff2?|mp3|mp4|avi)$/</span>,</span><br><span class="line">                        <span class="attr">type</span>: <span class="string">&#x27;asset/resource&#x27;</span>, <span class="comment">//不会转化成base64</span></span><br><span class="line">                        <span class="attr">generator</span>: &#123;</span><br><span class="line">                            <span class="comment">// 输出图片名称</span></span><br><span class="line">                            <span class="comment">// [hash:10] 表示只取 前十位</span></span><br><span class="line">                            <span class="attr">filename</span>: <span class="string">&#x27;static/media/[hash:10][ext][query]&#x27;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">                        <span class="comment">// exclude: /(node_modules|bower_components)/, //排除文件</span></span><br><span class="line">                        <span class="comment">// exclude: /node_modules/, // 排除node_modules代码不编译</span></span><br><span class="line">                        <span class="attr">include</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../src&quot;</span>), <span class="comment">// 也可以用包含</span></span><br><span class="line">                        <span class="attr">use</span>: &#123;</span><br><span class="line">                            <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">                        <span class="comment">//   options: &#123;</span></span><br><span class="line">                        <span class="comment">//     presets: [&#x27;@babel/preset-env&#x27;]</span></span><br><span class="line">                        <span class="comment">//   &#125;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 详细的loader配置</span></span><br><span class="line">            <span class="comment">// &#123;</span></span><br><span class="line">            <span class="comment">//     // 匹配哪些文件</span></span><br><span class="line">            <span class="comment">//     test: /\.css$/,</span></span><br><span class="line">            <span class="comment">//     // 使用哪些loader进行处理</span></span><br><span class="line">            <span class="comment">//     use: [</span></span><br><span class="line">            <span class="comment">//         // use数组中执行顺序：从右到左，从下到上，依次执行</span></span><br><span class="line">            <span class="comment">//         // 创建style标签，将js中的样式资源插入进行，添加到head中生效</span></span><br><span class="line">            <span class="comment">//         // &#x27;style-loader&#x27;,</span></span><br><span class="line">            <span class="comment">//         // 将css文件变成conmonjs模块加载js中,里面内容时样式字符串</span></span><br><span class="line">            <span class="comment">//         // &#x27;css-loader&#x27;,</span></span><br><span class="line">            <span class="comment">//         &#x27;style-loader&#x27;,</span></span><br><span class="line">            <span class="comment">//         &#x27;css-loader&#x27;</span></span><br><span class="line">            <span class="comment">//     ]</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// plugins的配置</span></span><br><span class="line">    <span class="attr">plugins</span>:[</span><br><span class="line">        <span class="comment">// 详细的plugins的配置</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">ESLintPlugin</span>(&#123;</span><br><span class="line">            <span class="comment">// 检测哪些文件</span></span><br><span class="line">            <span class="attr">context</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;../src&#x27;</span>),</span><br><span class="line">            <span class="attr">exclude</span>: <span class="string">&quot;node_modules&quot;</span>, <span class="comment">// 默认值</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="comment">// 以 public/index.html 为模板创建文件</span></span><br><span class="line">            <span class="comment">// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span></span><br><span class="line">            <span class="attr">template</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../public/index.html&quot;</span>),</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&quot;static/css/main.css&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// 开发服务器: 不会输出资源 不会去进行打包 在内存中打包 </span></span><br><span class="line">    <span class="attr">devServer</span>: &#123;</span><br><span class="line">        <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>, <span class="comment">// 启动服务器域名</span></span><br><span class="line">        <span class="attr">port</span>: <span class="string">&quot;3000&quot;</span>, <span class="comment">// 启动服务器端口号</span></span><br><span class="line">        <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">// 是否自动打开浏览器</span></span><br><span class="line">        <span class="attr">hot</span>: <span class="literal">true</span>, <span class="comment">// 开启HMR功能（只能用于开发环境，生产环境不需要了）</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 模式</span></span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">    <span class="attr">devtool</span>: <span class="string">&quot;cheap-module-source-map&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 运行方式:</span></span><br><span class="line"><span class="comment">//   npx webpack serve --config ./config/webpack.dev.js</span></span><br></pre></td></tr></table></figure></code></pre>]]></content>
      
      
      <categories>
          
          <category> 前端开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Webpack基础 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
